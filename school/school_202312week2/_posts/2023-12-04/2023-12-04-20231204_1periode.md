---
title: "2023년 12월 04일 1교시 요약"
tag: 202312_school
---

- Thread
  - VCPU : 필요할 때 즉시 생성해서 사용할 수 있는 CPU
  - CPU : 코드를 실행하는 장치
  - 다중 CPU : 여러개의 CPU를 사용하여 동시에 다수개의 코드를 실행할 수 있다.
  - 병행처리

- <숙제>
    - 서버에서 어떤 데이터를 보내면 서버는 모든 이용자에게 데이터를 발신해줘야한다.

<br>

#### 챗서버 스레드

```java
public class ChatServer extends Thread {
	private List<Socket> sockets;
	private Socket s;
	private BufferedReader br;
	private PrintWriter pw;
	private String name = null;

	ChatServer(List<Socket> sockets, Socket s) {
		this.s = s;
		this.sockets = sockets;
	}

	@Override
	public void run() {
		try {
            //닉네임 설정을 위한 출력
			pw = new PrintWriter(new OutputStreamWriter(s.getOutputStream()));
			pw.println("닉네임: ");
			pw.flush();
			
            //닉네임 설정을 위한 입력
			br = new BufferedReader(new InputStreamReader(s.getInputStream()));
			name = br.readLine();

			String msg = null;
			while ((msg = br.readLine()) != null) {
				for (int i = 0; i < sockets.size(); i++) {
					pw = new PrintWriter(new OutputStreamWriter(sockets.get(i).getOutputStream()));
					pw.printf("%s : %s \n", name, msg);
					pw.flush();
				}
			}
		} catch (Exception e) {
			System.out.println(name + " 나감");
		}
	}
}
```